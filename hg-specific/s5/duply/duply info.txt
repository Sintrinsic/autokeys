echo "===== Backup node hostname/partition ====="; grep -v OLD /etc/fstab  | awk -F"[@: \t]+" '$2~/com/{print $2, $3}' ;echo; echo "===== Alerting vm list ====="; awk '{print $1}' /tmp/failedBackups | while read id; do echo "$id $(awk -F"'" '/hostname/{print $2}' /home/xen/$id/$id.cfg) $(grep -oP "(?<=ip=)[0-9\. ]*" /home/xen/$id/$id.cfg ) $(ps fauxww | grep /backup/$id | grep -v grep &>/dev/null && printf "\033[0;32mbackup_running-IGNORE\033[0m\n")"; done | column -t;  echo; echo "===== Backup node server_list cmd ====="; vmlist=$(grep -oP "(?<=FAILEDBACKUP )\S*" /tmp/vmchk | perl -pe 'chomp if eof;s/\n/|/'); echo "echo '==== server_list entries ===='; /root/generate_serverlist.sh /root/manual_vps_backup | grep -P \"($vmlist)\"; echo; echo '===== recent logfiles for alerting vms ====='; echo "\"$vmlist\"" | tr '|' '\n' | while read vm; do find /var/log/backup_logs/ -regextype posix-extended -regex \".*\$vm.*\" -printf '%h/%f == %t\n'| sort | tail -n1; done" 