od=$(date --date="5 days ago" "+%d"); d=$(date "+%d"); for i in $(seq $od $d); do echo -e $(sar -q -f /var/log/sa/sa0${i}| awk '{ if ($5>N) {five="\\e[1;31m"$5"\\e[0m"} else {five="\\e[1;32m"$5"\\e[0m"} if ($6>N) {six="\\e[1;31m"$6"\\e[0m"} else {six="\\e[1;32m"$6"\\e[0m"} if ($7>N) {seven="\\e[1;31m"$7"\\e[0m"} else {seven="\\e[1;32m"$7"\\e[0m"} if ($5>N || $6>N || $7>N) {printf "%s\\t%s\\t%s\\t%s\\t%s\\t%s\\t%s\\n",$1,$2,$3,$4,five,six,seven}}' N=$(grep 'model name' /proc/cpuinfo| wc -l)); done 