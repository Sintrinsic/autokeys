echo "Too many connections errors per Hour"; cline(){ [[ $1 -gt 20 ]] && col=32; [[ $1 -gt 100 ]] && col=33;  [[ $1 -gt 300 ]] && col=31; printf "\033[1;${col}m %-$(($1 / 4))s \033[0m\n"  | sed 's/ /=/g';}; grep "Too many connections" /var/lib/mysql/$(hostname).err | sed 's/ \[.*//' | while read d; do date --date="$d" "+%D %H:00"; done | sort | uniq -c | sort -dk2 | while read cnt dt tm; do echo "$cnt $dt $tm $(cline $cnt)"; done  | (echo "Count Date Hour"; cat) | column -t