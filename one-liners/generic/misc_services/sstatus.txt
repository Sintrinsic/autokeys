function suptime(){ orig=$(ps -p $(ps fauxww | grep -i $1 | awk '!/\\/{print $2}') -o etime= ); ut=$(echo $orig | sed 's/-/ days -/;s/:/ hours -/;s/:/ minutes -/;s/.$/ seconds /')" ago"; date --date="-$ut" "+%m/%d %H:%M" ;}; echo "$(ass=$(service httpd status 2>/dev/null | head -n 17 | tail -n 1); [[ $(echo $ass| grep -i idle) ]] && echo $( echo $ass | awk '{ print "Apache","Req:"$1,"Idle:"$6,"UpSince:"}')$(suptime httpd) || echo "DOWN";echo "Dovecot:" $([[ $(service dovecot status | grep "is running") ]] && doveadm who 2>/dev/null| sort -nk2 | awk 'BEGIN{ttl=0;lc=0}{ttl=ttl+$2;lc=lc+1} END{print "Users:"lc,"Connections:"ttl, "UpSince:"}')$(suptime dovecot) || echo "DOWN")" | column -t
